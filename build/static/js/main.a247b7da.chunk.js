(this["webpackJsonpmypass-frontend-throwaway"]=this["webpackJsonpmypass-frontend-throwaway"]||[]).push([[0],{152:function(e,t){},153:function(e,t){},172:function(e,t){},196:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),l=a(25),o=a.n(l),s=(a(87),a(88),a(89),a(90),a(91),a(4)),c=a.n(s),i=a(9),u=a(10),d=a(12),p=a(11),m=a(13),g=a(3),h=a(5),f=a.n(h),y=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={activeItem:"1",deleteClicked:!1},a.toggle=function(e){return function(t){a.state.activeItem!==e&&a.setState({activeItem:e})}},a.deleteClicked=function(){console.log("delete clicked"),a.setState({deleteClicked:!0})},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t="#";void 0!==this.props.imgSrc&&(t=this.props.imgSrc.url);var a=[],n=[],l=!0,o=!1,s=void 0;try{for(var c,i=this.props.shareRequests[Symbol.iterator]();!(l=(c=i.next()).done);l=!0){var u=c.value;console.log("share request"),console.log(u),u.approved?n.push(r.a.createElement("div",null,r.a.createElement("p",null,"Type: ",u.documentType),r.a.createElement("p",null,"Share With: ",u.shareWithAccountId),r.a.createElement("p",null,"Approved: ",u.approved),r.a.createElement("hr",null))):a.push(r.a.createElement("div",null,r.a.createElement("p",null,"Type: ",u.documentType),r.a.createElement("p",null,"Share With: ",u.shareWithAccountId),r.a.createElement("p",null,"Approved: ",u.approved),r.a.createElement(g.d,{onClick:this.props.approveShareRequest(u)},"Approve"),r.a.createElement("hr",null)))}}catch(d){o=!0,s=d}finally{try{l||null==i.return||i.return()}finally{if(o)throw s}}return r.a.createElement(g.f,null,r.a.createElement(g.n,{className:"nav-tabs mt-5"},r.a.createElement(g.o,null,r.a.createElement(g.p,{to:"#",active:"1"===this.state.activeItem,onClick:this.toggle("1"),role:"tab"},"Preview")),r.a.createElement(g.o,null,r.a.createElement(g.p,{to:"#",active:"2"===this.state.activeItem,onClick:this.toggle("2"),role:"tab"},"Share")),r.a.createElement(g.o,null,r.a.createElement(g.p,{to:"#",active:"2"===this.state.activeItem,onClick:this.toggle("3"),role:"tab"},"Replace")),r.a.createElement(g.o,null,r.a.createElement(g.p,{to:"#",active:"3"===this.state.activeItem,onClick:this.toggle("4"),role:"tab"},r.a.createElement(g.g,{far:!0,icon:"trash-alt",size:"2x"})))),r.a.createElement(g.t,{activeItem:this.state.activeItem},r.a.createElement(g.u,{tabId:"1",role:"tabpanel"},r.a.createElement("img",{src:t,style:{width:"400px",verticalAlign:"middle",padding:"50px",display:"block",marginLeft:"auto",marginRight:"auto"}})),r.a.createElement(g.u,{tabId:"2",role:"tabpanel"},r.a.createElement("div",null,r.a.createElement("h3",{style:{padding:"25px",textAlign:"center"}},"Share Requests:"),r.a.createElement("hr",null),a,r.a.createElement("h3",{style:{padding:"25px",textAlign:"center"}},"Approved Share Requests:"),r.a.createElement("hr",null),n)),r.a.createElement(g.u,{tabId:"3",role:"tabpanel"},r.a.createElement("div",null,r.a.createElement("h3",{style:{padding:"25px",textAlign:"center"}},"Replace Feature Coming Soon..."))),r.a.createElement(g.u,{tabId:"4",role:"tabpanel"},r.a.createElement("div",{style:{backgroundColor:"#d3d3d3",borderRadius:"25px"}},!1===this.state.deleteClicked?r.a.createElement("div",null,r.a.createElement("h3",{style:{padding:"25px",textAlign:"center"}},"Are you sure you want to permanently delete this file?"),r.a.createElement("img",{src:t,style:{width:"400px",verticalAlign:"middle",padding:"50px",display:"block",marginLeft:"auto",marginRight:"auto"}}),r.a.createElement("h6",{style:{padding:"25px",textAlign:"center"}},"Deleting this file will permanently revoke access to all users"),r.a.createElement("h6",{style:{padding:"25px",textAlign:"center"}},"Are you sure?"),r.a.createElement("div",{style:{textAlign:"center",marginLeft:"auto",marginRight:"auto"}},r.a.createElement(g.d,{onClick:function(){e.props.deleteDocument(),e.deleteClicked()},color:"red"},"Yes, Delete it"))):r.a.createElement("h3",{style:{padding:"25px",textAlign:"center"}},"File has been deleted")))))}}]),t}(n.Component),v=a(33),E=a.n(v),b=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={ownerAccount:{},documentTypes:[],modal:!1,detailModal:!1,uploadDisabled:!0,currentUploadType:"",currentDetailType:"",uploadDocumentFinished:!1,documentTypeToUrlMap:{},shareRequests:[]},a.fileSelected=function(){a.setState({uploadDisabled:!1})},a.getAccountData=function(){var e,t;return c.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c.a.awrap(f.a.get(a.props.urlBase+"/api/document-types/"));case 2:return e=n.sent,console.log(e),a.setState({documentTypes:e.data.documentTypes}),n.next=7,c.a.awrap(f.a.get(a.props.urlBase+"/api/account/"+a.state.ownerAccount.id+"/share-requests"));case 7:t=n.sent,a.setState({shareRequests:t.data}),a.getDocuments();case 10:case"end":return n.stop()}}))},a.uploadDocument=function(){var e,t;return c.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(a.setState({uploadDocumentFinished:!0}),e=document.getElementById("inputGroupFile01").files,(t=new FormData).append("img",e[0]),t.append("type",a.state.currentUploadType),void 0===a.state.uploadForAccountName||void 0===a.state.uploadForAccountId){n.next=13;break}return t.append("uploadForAccountName",a.state.uploadForAccountName),t.append("uploadForAccountId",a.state.uploadForAccountId),n.next=10,c.a.awrap(fetch(a.props.urlBase+"/api/uploadDocumentOnBehalfOfUser/",{method:"POST",headers:{authorization:"Token "+localStorage.getItem("jwt-owner")},body:t}));case 10:n.sent,n.next=16;break;case 13:return n.next=15,c.a.awrap(fetch(a.props.urlBase+"/api/documents/",{method:"POST",headers:{authorization:"Token "+localStorage.getItem("jwt-owner")},body:t}));case 15:n.sent;case 16:a.getDocuments();case 17:case"end":return n.stop()}}))},a.getDocuments=function(){var e,t,n,r,l,o,s,i,u;return c.a.async((function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,c.a.awrap(f.a.get(a.props.urlBase+"/api/documents/"));case 2:for(e=d.sent,t=e.data.documents,console.log("documents:"),console.log(t),n={},r=0;r<t.length;r++)l=a.props.urlBase+"/api/documents/"+t[r].url,o=E()(t[r].createdAt),s=o.format("MMM Do YYYY"),i={createdAt:s,url:l+"/"+window.localStorage.getItem("jwt-owner")},u=t[r].type,n[u]=i;a.setState({documentTypeToUrlMap:n});case 9:case"end":return d.stop()}}))},a.deleteDocument=function(){var e;return c.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e=a.state.documentTypeToUrlMap[a.state.currentDetailType].url,t.next=3,c.a.awrap(f.a.delete(e));case 3:t.sent,a.getDocuments();case 5:case"end":return t.stop()}}))},a.loginAsOwner=function(){var e,t,n;return c.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return a.setState({loggedInAsOwner:!0}),e={account:{email:"owner@owner.com",password:"owner"}},r.next=4,c.a.awrap(f.a.post(a.props.urlBase+"/api/accounts/login",e));case 4:t=r.sent,n=t.data.account,f.a.defaults.headers.common.Authorization="Bearer "+n.token,localStorage.setItem("jwt-owner",n.token),console.log("account"),console.log(n),a.setState({ownerAccount:n}),a.getAccountData();case 12:case"end":return r.stop()}}))},a.logout=function(){return c.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.setItem("jwt-owner",void 0),document.location.href="/";case 2:case"end":return e.stop()}}))},a.toggle=function(e){return function(){a.setState({uploadDocumentFinished:!1}),a.setState({currentUploadType:e}),a.setState({uploadDisabled:!0}),a.setState({modal:!a.state.modal})}},a.toggleDetail=function(e){return function(){a.setState({currentDetailType:e}),a.setState({detailModal:!a.state.detailModal})}},a.approveShareRequest=function(e){return function(){var t,n;return c.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return console.log("sq"),console.log(e),t={shareRequestId:e._id,approved:!0},r.next=5,c.a.awrap(f.a.put(a.props.urlBase+"/api/account/"+a.state.ownerAccount.id+"/share-requests/",t));case 5:n=r.sent,console.log(n);case 7:case"end":return r.stop()}}))}},a.componentDidMount=function(){a.loginAsOwner()},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e,t=[],a=!0,n=!1,l=void 0;try{for(var o,s=this.state.documentTypes[Symbol.iterator]();!(a=(o=s.next()).done);a=!0){var c=o.value,i=c.name,u=this.toggleDetail(i);void 0===this.state.documentTypeToUrlMap[i]&&(u=this.toggle(i));var d=r.a.createElement("div",{class:"text-center",style:{verticalAlign:"bottom"}},r.a.createElement("p",{style:{color:"#d3d3d3",marginLeft:"auto",marginRight:"auto"}},"-")),p=!0,m=!1,h=void 0;try{for(var f,v=this.state.shareRequests[Symbol.iterator]();!(p=(f=v.next()).done);p=!0){var E=f.value;E.documentType===c.name&&!1===E.approved&&(d=r.a.createElement("div",{style:{verticalAlign:"bottom",marginTop:"30px"}},r.a.createElement("a",{onClick:u,href:"#"},r.a.createElement(g.g,{style:{width:"50px",display:"block",marginLeft:"auto",marginRight:"auto"},size:"3x",icon:"exclamation-circle"}))))}}catch(x){m=!0,h=x}finally{try{p||null==v.return||v.return()}finally{if(m)throw h}}t.push(r.a.createElement("div",null,r.a.createElement(g.s,null,r.a.createElement(g.e,{size:"4"},r.a.createElement("div",{style:{verticalAlign:"bottom",marginTop:"40px"}},void 0===this.state.documentTypeToUrlMap[i]?r.a.createElement(g.g,{onClick:u,style:{width:"100px",verticalAlign:"middle",paddingRight:"30px"},icon:"file",size:"4x"}):r.a.createElement("img",{onClick:u,src:this.state.documentTypeToUrlMap[i].url,style:{width:"100px",verticalAlign:"middle",paddingRight:"30px"}}),r.a.createElement("a",{style:{color:"black"},href:"#"},r.a.createElement("span",{onClick:u},i)))),r.a.createElement(g.e,{size:"2"},d),r.a.createElement(g.e,{size:"2"},r.a.createElement("div",{style:{marginTop:"40px"}},r.a.createElement("div",{style:{textAlign:"center",marginLeft:"auto",marginRight:"auto"}},void 0===this.state.documentTypeToUrlMap[i]?r.a.createElement(g.d,{onClick:this.toggle(i),color:"mdb-color"},"Upload"):r.a.createElement("div",null,r.a.createElement("div",{style:{verticalAlign:"bottom",marginTop:"30px"}},r.a.createElement("img",{style:{width:"50px",display:"block",marginLeft:"auto",marginRight:"auto"},class:"circular--square",src:"newimages/owner.png"})),r.a.createElement("p",null,this.state.documentTypeToUrlMap[i].createdAt))))),r.a.createElement(g.e,{size:"2"},r.a.createElement("div",{class:"text-center",style:{verticalAlign:"bottom",marginTop:"50px"}},r.a.createElement("p",{style:{marginLeft:"auto",marginRight:"auto"}},"-"))),r.a.createElement(g.e,{size:"2"},r.a.createElement("div",{class:"text-center",style:{verticalAlign:"bottom",marginTop:"50px"}},r.a.createElement("p",{style:{marginLeft:"auto",marginRight:"auto"}},"-")))),r.a.createElement("hr",null)))}}catch(x){n=!0,l=x}finally{try{a||null==s.return||s.return()}finally{if(n)throw l}}var b=r.a.createElement(g.j,{size:"large",isOpen:this.state.modal,toggle:this.toggle(""),centered:!0},r.a.createElement(g.m,{toggle:this.toggle("")},r.a.createElement("p",null,r.a.createElement(g.g,{far:!0,icon:"file"})," ","   ","Document Upload")),!0===this.state.uploadDocumentFinished?r.a.createElement(g.b,{type:"flipInX"},r.a.createElement("h1",{style:{marginLeft:"auto",marginRight:"auto"}},"Upload Finished")):r.a.createElement("div",null,r.a.createElement(g.k,null,r.a.createElement("div",{className:"custom-file"},r.a.createElement("input",{onClick:this.fileSelected,type:"file",className:"custom-file-input",id:"inputGroupFile01","aria-describedby":"inputGroupFileAddon01"}),r.a.createElement("label",{className:"custom-file-label",htmlFor:"inputGroupFile01"},"Choose file"))),r.a.createElement(g.l,null,r.a.createElement(g.d,{disabled:this.state.uploadDisabled,onClick:this.uploadDocument,style:{display:"block",marginLeft:"auto",marginRight:"auto"},color:"primary"},"Save")))),w=r.a.createElement(g.j,{size:"xl",isOpen:this.state.detailModal,toggle:this.toggleDetail(""),centered:!0},r.a.createElement(g.m,{toggle:this.toggleDetail("")},r.a.createElement("p",null,r.a.createElement(g.g,{far:!0,icon:"file"})," ","   ","Document Details")),r.a.createElement(g.k,null,r.a.createElement(y,{approveShareRequest:this.approveShareRequest,deleteDocument:this.deleteDocument,imgSrc:this.state.documentTypeToUrlMap[this.state.currentDetailType],ownerAccount:this.state.ownerAccount,shareRequests:this.state.shareRequests})));return e=r.a.createElement("div",null,b,w,r.a.createElement(g.s,null,r.a.createElement(g.e,{size:"1"},r.a.createElement("div",{class:"div-block-68",style:{width:"100px",height:"1317px"}},r.a.createElement("div",null,r.a.createElement("div",{class:"div-block-36"},r.a.createElement("div",{"data-w-id":"ddbc8949-2fc3-f476-97de-60228bd6fa89",class:"div-block-91",style:{width:"90px",height:"80px"}}))),r.a.createElement("div",{"data-w-id":"fd40dfd9-11f3-d26b-9e05-bf6a430b3346",class:"div-block-92"},r.a.createElement("div",{class:"div-block-38"},r.a.createElement("div",{class:"div-block-37"}))))),r.a.createElement(g.e,{size:"9"},r.a.createElement("div",{style:{paddingTop:"110px"}},r.a.createElement("div",{class:"div-block-109"},r.a.createElement("h1",{style:{fontWeight:"bold"},class:"heading-3"},"My Documents"))),r.a.createElement("hr",null),r.a.createElement(g.s,null,r.a.createElement(g.e,{size:"4"},r.a.createElement("div",{class:"text-block-16 name"},"NAME")),r.a.createElement(g.e,{size:"2"},r.a.createElement("div",{class:"text-block-16"},"SHARED WITH")),r.a.createElement(g.e,{size:"2"},r.a.createElement("div",{class:"text-block-16"},"UPLOADED")),r.a.createElement(g.e,{size:"2"},r.a.createElement("div",{class:"text-block-16"},"VALID UNTIL")),r.a.createElement(g.e,{size:"2"},r.a.createElement("div",{class:"text-block-16"},"NOTARIZED"))),t),r.a.createElement(g.e,{size:"2"},r.a.createElement("img",{style:{marginTop:"47px",width:"50px"},class:"circular--square",src:"newimages/owner.png"}),r.a.createElement("p",{style:{paddingLeft:"3px"}},r.a.createElement("button",{onClick:this.logout,className:"button-link"},"logout"))))),r.a.createElement("div",null,e)}}]),t}(r.a.Component),w=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={rolePerms:[],submitPermissionsClicked:!1,disableSubmit:!1},a.submitPermissions=function(){var e,t;return c.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e={rolePermissionTable:a.state.rolePerms},n.next=3,c.a.awrap(f.a.post("http://localhost:5000/api/admin/role-permission-table/",e));case 3:t=n.sent,console.log(t.data),a.setState({submitPermissionsClicked:!0});case 6:case"end":return n.stop()}}))},a.buildPermissionTable=function(){var e,t;return c.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c.a.awrap(f.a.get("http://localhost:5000/api/admin/role-permission-table"));case 2:if(e=n.sent,console.log("roles"),console.log(e.data.rolePermissionTable),null!==e.data.rolePermissionTable&&void 0!==e.data.rolePermissionTable&&JSON.stringify(e.data.rolePermissionTable)!==JSON.stringify({})){n.next=15;break}return n.next=8,c.a.awrap(f.a.get("http://localhost:5000/api/admin/generate-default-role-permissions-table"));case 8:t=n.sent,console.log("default tabe"),console.log(t.data.rolePermissionTable),JSON.stringify(t.data.rolePermissionTable)===JSON.stringify({})&&a.setState({disableSubmit:!0}),a.setState({rolePerms:t.data.rolePermissionTable}),n.next=16;break;case 15:a.setState({rolePerms:e.data.rolePermissionTable});case 16:case"end":return n.stop()}}))},a.componentDidMount=function(){a.buildPermissionTable()},a.checkBoxChanged=function(e){console.log(e.target.id),console.log(e.target.checked),console.log(e.target.name),a.state.rolePerms[e.target.id]=e.target.checked;var t=a.state.rolePerms;t[e.target.id]=e.target.checked,a.setState({rolePerms:t})},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=[];console.log("RENDER"),console.log(this.state.rolePerms);for(var t=0,a=Object.keys(this.state.rolePerms);t<a.length;t++){var n=a[t];console.log(n+" -> "+this.state.rolePerms[n]),e.push(r.a.createElement("div",null,r.a.createElement(g.i,{onChange:this.checkBoxChanged,label:n,filled:!0,checked:this.state.rolePerms[n],type:"checkbox",id:n}),r.a.createElement("hr",null)))}var l=r.a.createElement("h3",null,"Welcome!");return!0===this.state.disableSubmit&&(l=r.a.createElement("div",null,r.a.createElement("h3",null,"No roles or permissions found!"),r.a.createElement("p",null,"Please update roles and permissions with the post: /api/permissions/ and post: /api/roles/ endpoints"))),r.a.createElement(g.f,{style:{paddingTop:"100px"}},!1===this.state.submitPermissionsClicked?r.a.createElement("div",null,r.a.createElement(g.s,null,r.a.createElement(g.e,null),r.a.createElement(g.e,null,l),r.a.createElement(g.e,null)),r.a.createElement(g.s,null,r.a.createElement(g.e,null),r.a.createElement(g.e,null,e),r.a.createElement(g.e,null)),r.a.createElement(g.s,null,r.a.createElement(g.e,null),r.a.createElement(g.e,null,r.a.createElement(g.d,{onClick:this.submitPermissions,disabled:this.state.disableSubmit},"Submit Permissions")),r.a.createElement(g.e,null))):r.a.createElement("h1",null,"Permissions Updated!"))}}]),t}(r.a.Component),x=a(28),k=a(26),S=(a(127),a(128),a(129),a(78)),T=a.n(S),C=a(141),A=a(143);function O(e,t){var a=e.trim().replace(/[.*+?^${}()|[\]\\]/g,"\\$&");if(""===a)return[];var n=new RegExp("\\b"+a,"i");return t.filter((function(e){return n.test(I(e))}))}function I(e){return"".concat(e.first," ").concat(e.last)}function D(e,t){var a=t.query,n="".concat(e.first," ").concat(e.last),l=C(n,a),o=A(n,l);return r.a.createElement("span",{className:"suggestion-content",style:{backgroundSize:"50px",backgroundImage:"url("+e.imgSrc+")"}},r.a.createElement("span",{className:"name"},o.map((function(e,t){var a=e.highlight?"highlight":null;return r.a.createElement("span",{className:a,key:t},e.text)}))))}var j=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(d.a)(this,Object(p.a)(t).call(this))).onChange=function(t,a){var n=a.newValue;a.method;e.setState({value:n})},e.onSuggestionSelected=function(t,a){var n=a.suggestion;a.suggestionValue,a.suggestionIndex,a.sectionIndex,a.method;console.log(n),console.log(t),e.props.ownerSelectedFromDropdown(n)},e.onSuggestionsFetchRequested=function(t){var a=t.value;e.setState({suggestions:O(a,e.props.ownerAccountsForSearch)})},e.onSuggestionsClearRequested=function(){e.setState({suggestions:[]})},e.onComponentDidMount=function(){console.log("hi")},e.state={value:"",suggestions:[],mypassAccounts:[]},e}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state,t=e.value,a=e.suggestions,n={placeholder:"Search for owner",value:t,onChange:this.onChange};return r.a.createElement(T.a,{suggestions:a,onSuggestionsFetchRequested:this.onSuggestionsFetchRequested,onSuggestionsClearRequested:this.onSuggestionsClearRequested,getSuggestionValue:I,onSuggestionSelected:this.onSuggestionSelected,renderSuggestion:D,inputProps:n})}}]),t}(r.a.Component),N=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={caseWorkerAccount:{},loggedInAsCaseWorker:!0,uploadDocumentFinished:!1,ownerAccountsForSearch:[],ownerAccounts:[],selectedAccout:{},uploadModal:!1,availableDocumentTypes:[],requestClickedForTypes:{},shareRequests:[],allDocumentTypes:[],currentUploadType:"Birth Certificate",notarizationTypes:["Certified Copy","Affirmation"],currentNotirizationType:"Certified Copy",ownerSig:"example-sig",notaryInfo:"example-notary-info",pem:"example-pem",requestButtonClicked:!1,uploadOnBehalfResponseVC:void 0,uploadOnBehalfResponseVP:void 0},a.toggleUploadModal=function(){a.setState({uploadModal:!a.state.uploadModal})},a.requestDocument=function(e){return function(){var t,n,r;return c.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return console.log("request doc"),t={shareRequest:{accountId:a.state.selectedAccout._id,documentType:e}},l.next=4,c.a.awrap(f.a.post(a.props.urlBase+"/api/account/"+a.state.selectedAccout._id+"/share-requests",t));case 4:n=l.sent,console.log(n),a.setState({requestButtonClicked:!0}),(r=a.state.requestClickedForTypes)[e]=!0,a.setState({requestClickedForTypes:r});case 10:case"end":return l.stop()}}))}},a.fileSelected=function(){a.setState({uploadDisabled:!1})},a.getAllAccounts=function(){var e,t,n,r,l,o,s,i,u,d,p;return c.a.async((function(m){for(;;)switch(m.prev=m.next){case 0:return console.log("get accounts"),m.next=3,c.a.awrap(f.a.get(a.props.urlBase+"/api/accounts/"));case 3:for(e=m.sent,console.log(e.data),t=[],n=!0,r=!1,l=void 0,m.prev=9,o=e.data[Symbol.iterator]();!(n=(s=o.next()).done);n=!0)"owner"===(i=s.value).role&&(u="newimages/anon-user.png","sallyowner"===i.username&&(u="newimages/owner.png"),d={first:i.username,last:i.role,imgSrc:u,id:i._id},t.push(d));m.next=17;break;case 13:m.prev=13,m.t0=m.catch(9),r=!0,l=m.t0;case 17:m.prev=17,m.prev=18,n||null==o.return||o.return();case 20:if(m.prev=20,!r){m.next=23;break}throw l;case 23:return m.finish(20);case 24:return m.finish(17);case 25:return a.setState({ownerAccountsForSearch:t}),a.setState({ownerAccounts:e.data}),m.next=29,c.a.awrap(f.a.get(a.props.urlBase+"/api/document-types/"));case 29:p=m.sent,console.log("doc types!"),console.log(p.data.documentTypes),a.setState({allDocumentTypes:p.data.documentTypes});case 33:case"end":return m.stop()}}),null,null,[[9,13,17,25],[18,,20,24]])},a.getAccountData=function(){return c.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}))},a.ownerSelectedFromDropdown=function(e){var t,n,r;return c.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return console.log("from dropdown"),console.log(e),t=a.state.ownerAccounts.find((function(t){return t._id===e.id})),console.log(t),a.setState({selectedAccout:t}),[],l.next=8,c.a.awrap(f.a.get(a.props.urlBase+"/api/account/"+t._id+"/document-types"));case 8:return n=l.sent,l.next=11,c.a.awrap(f.a.get(a.props.urlBase+"/api/account/"+t._id+"/share-requests"));case 11:r=l.sent,a.setState({shareRequests:r.data}),console.log(n.data),a.setState({availableDocumentTypes:n.data});case 15:case"end":return l.stop()}}))},a.uploadAndNotarizeDocument=function(){var e,t,n,r,l,o;return c.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return a.setState({uploadDocumentFinished:!0}),e=document.getElementById("inputGroupFile01").files,t=document.getElementById("inputGroupFile02").files,(n=[]).push(e[0]),n.push(t[0]),(r=new FormData).append("img",e[0]),r.append("img",t[0]),r.append("type",a.state.currentUploadType),r.append("notarizationType",a.state.currentNotirizationType),r.append("notaryInfo",a.state.notaryInfo),r.append("signature",a.state.ownerSig),r.append("pem",a.state.pem),console.log(a.state.selectedAccout),r.append("uploadForAccountId",a.state.selectedAccout._id),console.log(r.values()),s.next=19,c.a.awrap(fetch(a.props.urlBase+"/api/upload-document-and-notarize-on-behalf-of-user/",{method:"POST",headers:{authorization:"Token "+localStorage.getItem("jwt-caseworker")},body:r}));case 19:return l=s.sent,console.log("response!"),s.next=23,c.a.awrap(l.json());case 23:o=s.sent,console.log(o),a.setState({uploadOnBehalfResponseVC:JSON.stringify(o.vc)}),a.setState({uploadOnBehalfResponseVP:JSON.stringify(o.vp)});case 27:case"end":return s.stop()}}))},a.getDocuments=function(){var e,t,n,r,l,o,s,i,u;return c.a.async((function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,c.a.awrap(f.a.get(a.props.urlBase+"/api/documents/"));case 2:for(e=d.sent,t=e.data.documents,console.log("documents:"),console.log(t),n={},r=0;r<t.length;r++)l=a.props.urlBase+"/api/documents/"+t[r].url,o=E()(t[r].createdAt),s=o.format("MMM Do YYYY"),i={createdAt:s,url:l},u=t[r].type,n[u]=i;a.setState({documentTypeToUrlMap:n});case 9:case"end":return d.stop()}}))},a.loginAsCaseWorker=function(){var e,t,n;return c.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return a.setState({loggedInAsOwner:!0}),e={account:{email:"caseworker@caseworker.com",password:"caseworker"}},r.next=4,c.a.awrap(f.a.post(a.props.urlBase+"/api/accounts/login",e));case 4:return t=r.sent,n=t.data.account,f.a.defaults.headers.common.Authorization="Bearer "+n.token,localStorage.setItem("jwt-caseworker",n.token),a.setState({caseWorkerAccount:n}),r.next=11,c.a.awrap(a.getAllAccounts());case 11:case"end":return r.stop()}}))},a.logout=function(){return c.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.setItem("jwt-caseworker",void 0),document.location.href="/";case 2:case"end":return e.stop()}}))},a.componentDidMount=function(){a.loginAsCaseWorker()},a.signatureChange=function(e){a.setState({ownerSig:e.target.value})},a.notaryInfoChange=function(e){a.setState({notaryInfo:e.target.value})},a.pemInfoChange=function(e){a.setState({pem:e.target.value})},a.notirizationTypeChange=function(e){a.setState({currentNotirizationType:e.target.value})},a.documentTypeChange=function(e){a.setState({currentUploadType:e.target.value})},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e,t,a,n=[],l=!0,o=!1,s=void 0;try{for(var c,i=this.state.availableDocumentTypes[Symbol.iterator]();!(l=(c=i.next()).done);l=!0){var u=c.value,d=r.a.createElement(g.d,{onClick:this.requestDocument(u),color:"mdb-color"},"Request"),p=!0,m=!1,h=void 0;try{for(var f,y=this.state.shareRequests[Symbol.iterator]();!(p=(f=y.next()).done);p=!0){var v=f.value;if(v.documentType===u&&v.shareWithAccountId===this.state.caseWorkerAccount.id&&!1===v.approved)d=r.a.createElement(g.d,{disabled:!0,onClick:this.requestDocument(u),color:"mdb-color"},"Requested");else if(v.documentType===u&&v.shareWithAccountId===this.state.caseWorkerAccount.id&&!0===v.approved){var E="http://localhost:5000/api/documents/"+v.documentUrl+"/"+window.localStorage.getItem("jwt-caseworker");d=r.a.createElement("img",{src:E})}}}catch(S){m=!0,h=S}finally{try{p||null==y.return||y.return()}finally{if(m)throw h}}console.log("this.state.requestClickedForTypes[documentType]"),console.log(u),console.log(this.state.requestClickedForTypes[u]),1==this.state.requestClickedForTypes[u]&&(d=r.a.createElement(g.d,{disabled:!0,onClick:this.requestDocument(u),color:"mdb-color"},"Requested")),n.push(r.a.createElement("div",null,r.a.createElement(g.s,null,r.a.createElement(g.e,null,r.a.createElement("h5",null,u)),r.a.createElement(g.e,null,d),r.a.createElement("hr",null))))}}catch(S){o=!0,s=S}finally{try{l||null==i.return||i.return()}finally{if(o)throw s}}a="sallyowner"===this.state.selectedAccout.username?r.a.createElement("img",{style:{margin:"47px",width:"450px"},class:"circular--square",src:"newimages/owner.png"}):r.a.createElement("img",{style:{margin:"47px",width:"450px"},class:"circular--square",src:"newimages/anon-user.png"}),void 0!==this.state.selectedAccout.username&&(e=r.a.createElement("div",{style:{textAlign:"center",marginTop:"100px"}},r.a.createElement("h2",null,this.state.selectedAccout.username),a,r.a.createElement("h5",null,"Upload a document for owner: ",this.state.selectedAccout.username),r.a.createElement(g.d,{onClick:this.toggleUploadModal,color:"mdb-color"},"Upload")),t=r.a.createElement("div",{style:{textAlign:"center",marginTop:"100px"}},r.a.createElement("h2",null,"Documents in MyPass"),r.a.createElement("hr",null),n));var b=r.a.createElement("select",{onChange:this.documentTypeChange},this.state.allDocumentTypes.map((function(e,t){return r.a.createElement("option",{key:t.name},e.name)}))),w=r.a.createElement("select",{onChange:this.notirizationTypeChange},this.state.notarizationTypes.map((function(e,t){return r.a.createElement("option",{key:t},e)}))),x=r.a.createElement("div",{className:"spinner-border text-primary",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."));void 0!==this.state.uploadOnBehalfResponseVC&&(x=r.a.createElement("div",null,r.a.createElement("h5",null,"Verifiable Credential"),r.a.createElement("p",null,this.state.uploadOnBehalfResponseVC),r.a.createElement("h5",null,"Verifiable Presentation"),r.a.createElement("p",null,this.state.uploadOnBehalfResponseVP)));var k=r.a.createElement(g.j,{size:"m",isOpen:this.state.uploadModal,toggle:this.toggleUploadModal,centered:!0},r.a.createElement(g.m,{toggle:this.toggleUploadModal},r.a.createElement("p",null,r.a.createElement(g.g,{far:!0,icon:"file"})," Upload Document On Behalf Of User")),r.a.createElement(g.k,{style:{textAlign:"center"}},!1===this.state.uploadDocumentFinished?r.a.createElement("div",null,r.a.createElement("h5",{style:{paddingTop:"50px"}},"Upload a document for owner:"," ",this.state.selectedAccout.username),r.a.createElement("div",{className:"custom-file"},r.a.createElement("input",{onClick:this.fileSelected,type:"file",id:"inputGroupFile01","aria-describedby":"inputGroupFileAddon01"}))," ",r.a.createElement("h5",{style:{paddingTop:"50px"}},"What type of document is this?"),b,r.a.createElement("h5",{style:{paddingTop:"50px"}},"What type of notarization is this?"),w,r.a.createElement(g.i,{style:{paddingTop:"50px"},onChange:this.signatureChange,type:"textarea",label:"Owner Signature",rows:"1"}),r.a.createElement(g.i,{style:{paddingTop:"50px"},onChange:this.notaryInfoChange,type:"textarea",label:"Notary Info",rows:"1"}),r.a.createElement("h5",{style:{paddingTop:"50px"}},"Attach your seal: "),r.a.createElement("div",{className:"custom-file"},r.a.createElement("input",{onClick:this.fileSelected,type:"file",id:"inputGroupFile02","aria-describedby":"inputGroupFileAddon02"})),r.a.createElement(g.i,{style:{paddingTop:"50px"},onChange:this.pemInfoChange,type:"textarea",label:"PEM Signing Key",rows:"1"}),r.a.createElement(g.d,{onClick:this.uploadAndNotarizeDocument},"Notarize and Upload")):r.a.createElement("div",null,x)));return r.a.createElement("div",null,k,r.a.createElement(g.s,null,r.a.createElement(g.e,{size:"1"},r.a.createElement("div",{class:"div-block-68",style:{width:"100px",height:"1317px"}},r.a.createElement("div",null,r.a.createElement("div",{class:"div-block-36"},r.a.createElement("div",{"data-w-id":"ddbc8949-2fc3-f476-97de-60228bd6fa89",class:"div-block-91",style:{width:"90px",height:"80px"}}))),r.a.createElement("div",{"data-w-id":"fd40dfd9-11f3-d26b-9e05-bf6a430b3346",class:"div-block-92"},r.a.createElement("div",{class:"div-block-38"},r.a.createElement("div",{class:"div-block-37"}))))),r.a.createElement(g.e,{size:"9"},r.a.createElement("div",{style:{paddingTop:"110px"}},r.a.createElement("div",{class:"div-block-109"},r.a.createElement("h1",{style:{fontWeight:"bold"},class:"heading-3"},"MyPass"))),r.a.createElement("hr",null),r.a.createElement(g.s,null,r.a.createElement(g.e,null,r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(j,{ownerSelectedFromDropdown:this.ownerSelectedFromDropdown,ownerAccountsForSearch:this.state.ownerAccountsForSearch})))),r.a.createElement(g.s,null,r.a.createElement(g.e,null,e),r.a.createElement(g.e,null,t))),r.a.createElement(g.e,{size:"2"},r.a.createElement("img",{style:{marginTop:"47px",width:"50px"},class:"circular--square",src:"newimages/caseworker.png"}),r.a.createElement("p",{style:{paddingLeft:"3px"}},r.a.createElement("button",{onClick:this.logout,className:"button-link"},"logout")))))}}]),t}(r.a.Component),R=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).loginAsOwner=function(){return c.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:a.props.history.push("/owner");case 1:case"end":return e.stop()}}))},a.loginAsCaseWorker=function(){return c.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:a.props.history.push("/caseworker");case 1:case"end":return e.stop()}}))},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(g.s,null,r.a.createElement(g.e,null),r.a.createElement(g.e,null,r.a.createElement("img",{style:{marginTop:"300px",width:"350px",display:"block",marginLeft:"auto",marginRight:"auto"},src:"./newimages/mypass-logo.png"}),r.a.createElement(g.s,null,r.a.createElement(g.e,null,r.a.createElement("div",{style:{marginTop:"100px"}},r.a.createElement("img",{style:{width:"70px",display:"block",marginLeft:"auto",marginRight:"auto"},class:"circular--square",src:"newimages/owner.png"}),r.a.createElement(g.d,{onClick:this.loginAsOwner,style:{display:"block",marginLeft:"auto",marginRight:"auto"},color:"primary"},"Login As Owner"))),r.a.createElement(g.e,null,r.a.createElement("div",{style:{marginTop:"100px"}},r.a.createElement("img",{style:{width:"70px",display:"block",marginLeft:"auto",marginRight:"auto"},class:"circular--square",src:"newimages/caseworker.png"}),r.a.createElement(g.d,{onClick:this.loginAsCaseWorker,style:{display:"block",marginLeft:"auto",marginRight:"auto"},color:"primary"},"Login As Case Worker"))))),r.a.createElement(g.e,null)))}}]),t}(r.a.Component),M=a(79),q=a(81),z=a(80),F={name:"rsk:testnet",registry:"0xdca7ef03e98e0dc2b855be647c39abe984fcf21b",rpcUrl:"https://did.testnet.rsk.co:4444"},B=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={error:void 0,resolver:void 0,verifiedVC:void 0,signerMatches:!1,verifiedSigner:"0x2a6F1D5083fb19b9f2C653B598abCb5705eD0439",jwt:"eyJ0eXAiOiJKV1QiLCJhbGciOiJFUzI1NkstUiJ9.eyJpYXQiOjE1ODI4MjA4MDYsInN1YiI6ImRpZDpldGhyOjB4NmVmZWRlYWVjMjBlNzkwNzEyNTFmZmZhNjU1RjFiZERDYTY1YzAyNyIsIm5iZiI6MTU4MjgyMDgwNiwidmMiOnsiQGNvbnRleHQiOlsiaHR0cHM6Ly93d3cudzMub3JnLzIwMTgvY3JlZGVudGlhbHMvdjEiXSwidHlwZSI6WyJWZXJpZmlhYmxlQ3JlZGVudGlhbCJdLCJjcmVkZW50aWFsU3ViamVjdCI6eyJkb2N1bWVudCI6eyJ0eXBlIjoiQmlydGggQ2VydGlmaWNhdGUiLCJoYXNoIjoiZTlmNWMzOGYwODk2N2U4NDEzODc3NWY3OGYwNTg5N2EiLCJ1cmxIYXNoIjoiYWZjNTZlN2ZiMzUxODBiZjZkOGQ4YzIzZDM3MmM1NTAifSwibm90YXJpemF0aW9uIjp7InNlYWxIYXNoIjoiZTlmNWMzOGYwODk2N2U4NDEzODc3NWY3OGYwNTg5N2EiLCJub3Rhcml6YXRpb25UeXBlIjoiQ2VydGlmaWVkIENvcHkiLCJub3RhcnlJbmZvIjoiZXhhbXBsZS1ub3RhcnktaW5mbyIsInBlbSI6ImV4YW1wbGUtcGVtIn19fSwiaXNzIjoiZGlkOmV0aHI6MHgyYTZGMUQ1MDgzZmIxOWI5ZjJDNjUzQjU5OGFiQ2I1NzA1ZUQwNDM5In0.vB-U9fgyp9JBYr8ycxmuVKIEc3ZYeZqKfreda3pXMFcQH1gG7jOgqJVqVH_omIw74N5LO_LQBWKBUYvAi5j3GQA"},a.componentDidMount=function(){var e=new q.a(Object(z.getResolver)(F));console.log(e),a.setState({resolver:e})},a.jwtChange=function(e){a.setState({jwt:e.target.value})},a.verifyJWTClicked=function(){var e;return c.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c.a.awrap(Object(M.verifyCredential)(a.state.jwt,a.state.resolver));case 3:e=t.sent,t.next=11;break;case 6:return t.prev=6,t.t0=t.catch(0),console.log(t.t0),a.setState({error:t.t0.message}),t.abrupt("return");case 11:console.log(e),e.signer.id.toLowerCase().includes(a.state.verifiedSigner.toLowerCase())&&a.setState({signerMatches:!0}),a.setState({verifiedVC:e}),a.setState({error:void 0});case 15:case"end":return t.stop()}}),null,null,[[0,6]])},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(g.f,{style:{paddingTop:"100px"}},r.a.createElement("h1",null,"Verify JWT"),this.state.error&&JSON.stringify(this.state.error),r.a.createElement(g.i,{style:{paddingTop:"50px"},onChange:this.jwtChange,type:"textarea",label:"Paste Your JWT Here",rows:"8"}),r.a.createElement(g.d,{onClick:this.verifyJWTClicked},"Verify"),r.a.createElement(g.s,{style:{textAlign:"center"}},r.a.createElement(g.e,null,this.state.signerMatches&&r.a.createElement(g.g,{style:{paddingTop:"50px"},size:"5x",icon:"check"})),r.a.createElement(g.e,null,r.a.createElement("h3",null,"Verified Signer"),r.a.createElement("img",{style:{margin:"47px",width:"45px"},class:"circular--square",src:"newimages/caseworker.png"}),this.state.verifiedVC&&this.state.verifiedSigner),r.a.createElement(g.e,null,r.a.createElement("h3",{style:{paddingTop:"100px"}},"VS")),r.a.createElement(g.e,null,r.a.createElement("h3",null,"Signer From JWT"),r.a.createElement("img",{style:{margin:"47px",width:"45px"},class:"circular--square",src:"newimages/question.jpg"}),this.state.verifiedVC&&this.state.verifiedVC.signer.id)),r.a.createElement("h3",{style:{paddingTop:"50px"}},"Subject"),this.state.verifiedVC&&this.state.verifiedVC.payload.sub,r.a.createElement("h3",{style:{paddingTop:"50px"}},"Issuer"),this.state.verifiedVC&&this.state.verifiedVC.issuer,r.a.createElement("h3",{style:{paddingTop:"50px"}},"Signer"),this.state.verifiedVC&&this.state.verifiedVC.signer.id,r.a.createElement("h3",{style:{paddingTop:"50px"}},"Full JWT Decoded:"),this.state.verifiedVC&&JSON.stringify(this.state.verifiedVC))}}]),t}(r.a.Component),U="http://localhost:5000";var W=function(){return r.a.createElement(x.a,null,r.a.createElement("div",null,r.a.createElement(k.c,null,r.a.createElement(k.a,{path:"/verify"},r.a.createElement(B,null)),r.a.createElement(k.a,{path:"/admin"},r.a.createElement(w,null)),r.a.createElement(k.a,{path:"/owner"},r.a.createElement(b,{urlBase:U})),r.a.createElement(k.a,{path:"/caseworker"},r.a.createElement(N,{urlBase:U})),r.a.createElement(k.a,{path:"/",render:function(e){return r.a.createElement(R,e)}}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(W,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},82:function(e,t,a){e.exports=a(196)},87:function(e,t,a){},88:function(e,t,a){},89:function(e,t,a){},90:function(e,t,a){},91:function(e,t,a){}},[[82,1,2]]]);
//# sourceMappingURL=main.a247b7da.chunk.js.map